<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lesson 11 Manage Schema Objects - Altering Tables | SQL Lessons</title>
    <meta name="description" content="SQL Lessons">
    
    
    <link rel="preload" href="/osqlnotes/assets/css/0.styles.c566d983.css" as="style"><link rel="preload" href="/osqlnotes/assets/js/app.97a6742f.js" as="script"><link rel="preload" href="/osqlnotes/assets/js/2.8cd1edd2.js" as="script"><link rel="preload" href="/osqlnotes/assets/js/7.1154f5cc.js" as="script"><link rel="prefetch" href="/osqlnotes/assets/js/10.6e9cee4f.js"><link rel="prefetch" href="/osqlnotes/assets/js/11.96031474.js"><link rel="prefetch" href="/osqlnotes/assets/js/12.466d5af4.js"><link rel="prefetch" href="/osqlnotes/assets/js/13.e68d3448.js"><link rel="prefetch" href="/osqlnotes/assets/js/14.13c5430f.js"><link rel="prefetch" href="/osqlnotes/assets/js/15.10c781f9.js"><link rel="prefetch" href="/osqlnotes/assets/js/16.1a525148.js"><link rel="prefetch" href="/osqlnotes/assets/js/17.df35e1c0.js"><link rel="prefetch" href="/osqlnotes/assets/js/18.15b86135.js"><link rel="prefetch" href="/osqlnotes/assets/js/3.666663bc.js"><link rel="prefetch" href="/osqlnotes/assets/js/4.688aea8c.js"><link rel="prefetch" href="/osqlnotes/assets/js/5.22e3cbc4.js"><link rel="prefetch" href="/osqlnotes/assets/js/6.8d98af04.js"><link rel="prefetch" href="/osqlnotes/assets/js/8.6cd612cd.js"><link rel="prefetch" href="/osqlnotes/assets/js/9.7de680e0.js">
    <link rel="stylesheet" href="/osqlnotes/assets/css/0.styles.c566d983.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/osqlnotes/" class="home-link router-link-active"><!----> <span class="site-name">SQL Lessons</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/osqlnotes/" class="nav-link">Summary</a></div><div class="nav-item"><a href="/osqlnotes/Lesson1.html" class="nav-link">L1</a></div><div class="nav-item"><a href="/osqlnotes/Lesson2.html" class="nav-link">L2</a></div><div class="nav-item"><a href="/osqlnotes/Lesson3.html" class="nav-link">L3</a></div><div class="nav-item"><a href="/osqlnotes/Lesson4.html" class="nav-link">L4</a></div><div class="nav-item"><a href="/osqlnotes/Lesson5.html" class="nav-link">L5</a></div><div class="nav-item"><a href="/osqlnotes/Lesson6.html" class="nav-link">L6</a></div><div class="nav-item"><a href="/osqlnotes/Lesson7.html" class="nav-link">L7</a></div><div class="nav-item"><a href="/osqlnotes/Lesson8.html" class="nav-link">L8</a></div><div class="nav-item"><a href="/osqlnotes/Lesson9.html" class="nav-link">L9</a></div><div class="nav-item"><a href="/osqlnotes/Lesson10.html" class="nav-link">L10</a></div><div class="nav-item"><a href="/osqlnotes/Lesson11.html" class="nav-link router-link-exact-active router-link-active">L11</a></div><div class="nav-item"><a href="/osqlnotes/Lesson12.html" class="nav-link">L12</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/osqlnotes/" class="nav-link">Summary</a></div><div class="nav-item"><a href="/osqlnotes/Lesson1.html" class="nav-link">L1</a></div><div class="nav-item"><a href="/osqlnotes/Lesson2.html" class="nav-link">L2</a></div><div class="nav-item"><a href="/osqlnotes/Lesson3.html" class="nav-link">L3</a></div><div class="nav-item"><a href="/osqlnotes/Lesson4.html" class="nav-link">L4</a></div><div class="nav-item"><a href="/osqlnotes/Lesson5.html" class="nav-link">L5</a></div><div class="nav-item"><a href="/osqlnotes/Lesson6.html" class="nav-link">L6</a></div><div class="nav-item"><a href="/osqlnotes/Lesson7.html" class="nav-link">L7</a></div><div class="nav-item"><a href="/osqlnotes/Lesson8.html" class="nav-link">L8</a></div><div class="nav-item"><a href="/osqlnotes/Lesson9.html" class="nav-link">L9</a></div><div class="nav-item"><a href="/osqlnotes/Lesson10.html" class="nav-link">L10</a></div><div class="nav-item"><a href="/osqlnotes/Lesson11.html" class="nav-link router-link-exact-active router-link-active">L11</a></div><div class="nav-item"><a href="/osqlnotes/Lesson12.html" class="nav-link">L12</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/osqlnotes/" class="sidebar-link">osqlnotes</a></li><li><a href="/osqlnotes/Lesson1.html" class="sidebar-link">Lesson 1 Select</a></li><li><a href="/osqlnotes/Lesson2.html" class="sidebar-link">Lesson 2 Where</a></li><li><a href="/osqlnotes/Lesson3.html" class="sidebar-link">Lesson 3 Single Row Functions</a></li><li><a href="/osqlnotes/Lesson4.html" class="sidebar-link">Lesson 4 Group Functions pt.1</a></li><li><a href="/osqlnotes/Lesson5.html" class="sidebar-link">Lesson 5 Joining tables</a></li><li><a href="/osqlnotes/Lesson6.html" class="sidebar-link">Lesson 6 Using Sub-queries</a></li><li><a href="/osqlnotes/Lesson7.html" class="sidebar-link">Lesson 7 Quiz Questions</a></li><li><a href="/osqlnotes/Lesson8.html" class="sidebar-link">Lesson 8 Set operators</a></li><li><a href="/osqlnotes/Lesson9.html" class="sidebar-link">Lesson 9 DML Manipulating Data</a></li><li><a href="/osqlnotes/Lesson10.html" class="sidebar-link">Lesson 10 Create Manage Tables</a></li><li><a href="/osqlnotes/Lesson11.html" class="active sidebar-link">Lesson 11 Manage Schema Objects - Altering Tables</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson11.html#example" class="sidebar-link">Example</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson11.html#modifying-a-column" class="sidebar-link">Modifying a Column</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson11.html#guidelines-to-modifying" class="sidebar-link">Guidelines to modifying</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson11.html#dropping-a-column" class="sidebar-link">Dropping a column</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson11.html#using-unused" class="sidebar-link">Using UNUSED</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson11.html#constraints" class="sidebar-link">Constraints</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson11.html#on-delete-cascade" class="sidebar-link">ON DELETE CASCADE</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson11.html#on-delete-set-null" class="sidebar-link">ON DELETE SET NULL</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson11.html#deferring-constraints" class="sidebar-link">Deferring constraints</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson11.html#dropping-disabling-enable-constraint" class="sidebar-link">Dropping/Disabling/enable Constraint</a></li></ul></li><li><a href="/osqlnotes/Lesson12.html" class="sidebar-link">Lesson 12 Index-Dictionary Views</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="lesson-11-manage-schema-objects-altering-tables"><a href="#lesson-11-manage-schema-objects-altering-tables" class="header-anchor">#</a> Lesson 11 Manage Schema Objects - Altering Tables</h1> <p>Use the alter table statement to:</p> <ul><li>add a new column</li> <li>modify an existing column</li> <li>define default for new column</li> <li>drop a column</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> tableN
<span class="token keyword">add</span> <span class="token punctuation">(</span><span class="token keyword">column</span> datatype <span class="token punctuation">[</span><span class="token keyword">default</span> expr<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> tableN
<span class="token keyword">modify</span> <span class="token punctuation">(</span><span class="token keyword">column</span> datatype <span class="token punctuation">[</span><span class="token keyword">default</span> expr<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> tableN
<span class="token keyword">drop</span> <span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="example"><a href="#example" class="header-anchor">#</a> Example</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">Alter</span> <span class="token keyword">table</span> dept80
<span class="token keyword">add</span> <span class="token punctuation">(</span>jobid <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>You can add or modify a column</li> <li>You cannot determine the order of the columns</li> <li>In the above, the column added is the last column</li></ul></div> <div class="custom-block warning"><p class="custom-block-title">Note</p> <ul><li>if table has rows of values, then the column is either null or the default.</li> <li>if th column is NOT NULL, then it needs a default value to start with.</li> <li>if table is empty you can add a NOT NULL without the need for a default value.</li></ul></div> <h2 id="modifying-a-column"><a href="#modifying-a-column" class="header-anchor">#</a> Modifying a Column</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">Alter</span> <span class="token keyword">table</span> dept80
<span class="token keyword">modify</span> <span class="token punctuation">(</span>last_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="guidelines-to-modifying"><a href="#guidelines-to-modifying" class="header-anchor">#</a> Guidelines to modifying</h2> <ol><li><p>increase width or precision of numeric columns</p></li> <li><p>increase width of character columns</p></li> <li><p>you can decrease width if:</p></li></ol> <ul><li>the column has only NULL values</li> <li>the table has no rows</li> <li>the decreases is not less than the values in the column</li></ul> <ol start="4"><li>You can change the data type if null</li></ol> <ul><li>except char to varchar is allowed</li></ul> <ol start="5"><li>a change to the default is not retroactive</li></ol> <h2 id="dropping-a-column"><a href="#dropping-a-column" class="header-anchor">#</a> Dropping a column</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> dept80
<span class="token keyword">drop</span> <span class="token keyword">column</span> jobid
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Only 1 column dropped at a time</p> <ul><li>the column can or cannot have data in it</li> <li>after the alter there must be at least 1 column left in the table</li> <li>columns that are part of a constraint cannot be dropped</li></ul></div> <h2 id="using-unused"><a href="#using-unused" class="header-anchor">#</a> Using UNUSED</h2> <p>Marks 1 or more columns as unused.</p> <ul><li>Dropping may be slow if there is a lot of data to drop</li> <li>May be better to mark as unused and drop later when fewer users on system</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>SELECT * will not show the data even though it is still there
DESCRIBE will not show the columns</p></div> <p>You can DROP UNUSED COLUMN to remove a column marked as unused.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> departments
  <span class="token keyword">set</span> unused<span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> departments
  <span class="token keyword">drop</span> unused <span class="token keyword">columns</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="constraints"><a href="#constraints" class="header-anchor">#</a> Constraints</h2> <p>ALTER TABLE – ADD CONSTRAINTS</p> <ul><li><p>ADD constraints</p></li> <li><p>DROP constraints</p></li> <li><p>ENABLE</p></li> <li><p>DISABLE</p></li> <li><p>ADD NOT NULL</p></li></ul> <h3 id="add-a-foreign-key-constraint-to-emp2-table-indicating-that-a-manager-must-already-exist-as-valid-employee-in-emp2-table"><a href="#add-a-foreign-key-constraint-to-emp2-table-indicating-that-a-manager-must-already-exist-as-valid-employee-in-emp2-table" class="header-anchor">#</a> add a foreign key constraint to emp2 table indicating that a manager must already exist as valid employee in emp2 table</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> emp2
<span class="token keyword">modify</span> employeeid <span class="token keyword">Primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> emp2
<span class="token keyword">add</span> <span class="token keyword">constraint</span> emp_mgr_fk
  <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>managerid<span class="token punctuation">)</span>
  <span class="token keyword">references</span> emp2<span class="token punctuation">(</span>employeeid<span class="token punctuation">)</span>

</code></pre></div><h2 id="on-delete-cascade"><a href="#on-delete-cascade" class="header-anchor">#</a> ON DELETE CASCADE</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span>	EMPLOYEES
<span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> em_dt_fk
<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span>	<span class="token punctuation">(</span>departmentid<span class="token punctuation">)</span>
<span class="token keyword">REFERENCES</span>	departments <span class="token punctuation">(</span>departmentid<span class="token punctuation">)</span>
<span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>Allow parent key data that is referenced in the child table to be deleted but not updated</li> <li>When parent row is deleted, all child rows that reference that parent key is also deleted.</li></ul> <ul><li>i.e. if you delete the department ID in the department table all references in employees will be deleted</li></ul></div> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> DEPT_100<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span>	dept_100
<span class="token punctuation">(</span>emp_id	number <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> 	<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
Lname	varchar2<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
Mgr_id	number <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> 	<span class="token keyword">CONSTRAINT</span>  fk_MGRd100
				<span class="token keyword">REFERENCES</span>	DEPT_100
				<span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> DEPT_100	<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'ONE'</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> DEPT_100 	<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'two'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> DEPT_100 	<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'333'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> DEPT_100 	<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'444'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> DEPT_100 	<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'555'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> DEPT_100<span class="token punctuation">;</span>


RESULT:
    EMP_ID LNAME          MGR_ID
<span class="token comment">---------- ---------- ----------</span>
         <span class="token number">1</span> ONE
         <span class="token number">2</span> two                 <span class="token number">1</span>
         <span class="token number">3</span> <span class="token number">333</span>                 <span class="token number">1</span>
         <span class="token number">4</span> <span class="token number">444</span>                 <span class="token number">2</span>
         <span class="token number">5</span> <span class="token number">555</span>                 <span class="token number">2</span>

<span class="token keyword">delete</span> <span class="token keyword">from</span> dept_100
<span class="token keyword">where</span> emp_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept_100<span class="token punctuation">;</span>

<span class="token comment">-- returns</span>
<span class="token comment">-- no rows selected</span>

</code></pre></div><div class="custom-block danger"><p class="custom-block-title">What happened</p> <ul><li>When parent row is deleted, all child rows that reference that parent key is also deleted.</li></ul></div> <h2 id="on-delete-set-null"><a href="#on-delete-set-null" class="header-anchor">#</a> ON DELETE SET NULL</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> DEPT_100<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span>	dept_100
<span class="token punctuation">(</span>emp_id	number <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> 	<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
Lname	varchar2<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
Mgr_id	number <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> 	<span class="token keyword">CONSTRAINT</span>  fk_MGRd100
				<span class="token keyword">REFERENCES</span>	DEPT_100
				<span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">SET</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> DEPT_100	<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'ONE'</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> DEPT_100 	<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'two'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> DEPT_100 	<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'333'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> DEPT_100 	<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'444'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> DEPT_100 	<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'555'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> DEPT_100<span class="token punctuation">;</span>

RESULT:
    EMP_ID LNAME          MGR_ID
<span class="token comment">---------- ---------- ----------</span>
         <span class="token number">1</span> ONE
         <span class="token number">2</span> two                 <span class="token number">1</span>
         <span class="token number">3</span> <span class="token number">333</span>                 <span class="token number">1</span>
         <span class="token number">4</span> <span class="token number">444</span>                 <span class="token number">2</span>
         <span class="token number">5</span> <span class="token number">555</span>                 <span class="token number">2</span>

Remove manager <span class="token number">1</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> dept_100
<span class="token keyword">where</span> emp_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept_100<span class="token punctuation">;</span>
<span class="token comment">--1 rows deleted.</span>
    EMP_ID LNAME          MGR_ID
<span class="token comment">---------- ---------- ----------</span>
         <span class="token number">2</span> two
         <span class="token number">3</span> <span class="token number">333</span>
         <span class="token number">4</span> <span class="token number">444</span>                 <span class="token number">2</span>
         <span class="token number">5</span> <span class="token number">555</span>                 <span class="token number">2</span>

</code></pre></div><h2 id="deferring-constraints"><a href="#deferring-constraints" class="header-anchor">#</a> Deferring constraints</h2> <p>Used in transactions</p> <p>Constraints can have the following attributes:</p> <ul><li>deferrable or not deferrable</li> <li>initially deferred or initially immediate</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> dept2
<span class="token keyword">add</span> <span class="token keyword">constraint</span> dept2_id_pk
<span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>departmentid<span class="token punctuation">)</span>
deferrable initially deferred<span class="token punctuation">;</span>
<span class="token comment">--</span>
<span class="token keyword">set</span> constraints dept_id_pk IMMEDIATE

<span class="token keyword">alter</span> <span class="token keyword">session</span>
<span class="token keyword">set</span> constraints <span class="token operator">=</span> immediate

</code></pre></div><table><thead><tr><th style="text-align:center;">Constraint</th> <th style="text-align:center;"></th></tr></thead> <tbody><tr><td style="text-align:center;">Initially deferred</td> <td style="text-align:center;">waits to check the constraint until the transaction ends</td></tr> <tr><td style="text-align:center;">initially immediate</td> <td style="text-align:center;">checks the constraint at the end of the statement execution</td></tr></tbody></table> <h2 id="dropping-disabling-enable-constraint"><a href="#dropping-disabling-enable-constraint" class="header-anchor">#</a> Dropping/Disabling/enable Constraint</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> emp2
<span class="token keyword">drop</span> <span class="token keyword">constraint</span> emp_mgr_fk<span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> dept2
<span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">cascade</span><span class="token punctuation">;</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> emp2
<span class="token keyword">disable</span> <span class="token keyword">constraint</span> emp_dt_fk <span class="token keyword">cascade</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp2
<span class="token keyword">enable</span> <span class="token keyword">constraint</span> emp_dt_fk <span class="token keyword">cascade</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/osqlnotes/Lesson10.html" class="prev">Lesson 10 Create Manage Tables</a></span> <span class="next"><a href="/osqlnotes/Lesson12.html">Lesson 12 Index-Dictionary Views</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/osqlnotes/assets/js/app.97a6742f.js" defer></script><script src="/osqlnotes/assets/js/2.8cd1edd2.js" defer></script><script src="/osqlnotes/assets/js/7.1154f5cc.js" defer></script>
  </body>
</html>
