<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lesson 9 DML Manipulating Data | SQL Lessons</title>
    <meta name="description" content="SQL Lessons">
    
    
    <link rel="preload" href="/osqlnotes/assets/css/0.styles.c566d983.css" as="style"><link rel="preload" href="/osqlnotes/assets/js/app.97a6742f.js" as="script"><link rel="preload" href="/osqlnotes/assets/js/2.8cd1edd2.js" as="script"><link rel="preload" href="/osqlnotes/assets/js/16.1a525148.js" as="script"><link rel="prefetch" href="/osqlnotes/assets/js/10.6e9cee4f.js"><link rel="prefetch" href="/osqlnotes/assets/js/11.96031474.js"><link rel="prefetch" href="/osqlnotes/assets/js/12.466d5af4.js"><link rel="prefetch" href="/osqlnotes/assets/js/13.e68d3448.js"><link rel="prefetch" href="/osqlnotes/assets/js/14.13c5430f.js"><link rel="prefetch" href="/osqlnotes/assets/js/15.10c781f9.js"><link rel="prefetch" href="/osqlnotes/assets/js/17.df35e1c0.js"><link rel="prefetch" href="/osqlnotes/assets/js/18.15b86135.js"><link rel="prefetch" href="/osqlnotes/assets/js/3.666663bc.js"><link rel="prefetch" href="/osqlnotes/assets/js/4.688aea8c.js"><link rel="prefetch" href="/osqlnotes/assets/js/5.22e3cbc4.js"><link rel="prefetch" href="/osqlnotes/assets/js/6.8d98af04.js"><link rel="prefetch" href="/osqlnotes/assets/js/7.1154f5cc.js"><link rel="prefetch" href="/osqlnotes/assets/js/8.6cd612cd.js"><link rel="prefetch" href="/osqlnotes/assets/js/9.7de680e0.js">
    <link rel="stylesheet" href="/osqlnotes/assets/css/0.styles.c566d983.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/osqlnotes/" class="home-link router-link-active"><!----> <span class="site-name">SQL Lessons</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/osqlnotes/" class="nav-link">Summary</a></div><div class="nav-item"><a href="/osqlnotes/Lesson1.html" class="nav-link">L1</a></div><div class="nav-item"><a href="/osqlnotes/Lesson2.html" class="nav-link">L2</a></div><div class="nav-item"><a href="/osqlnotes/Lesson3.html" class="nav-link">L3</a></div><div class="nav-item"><a href="/osqlnotes/Lesson4.html" class="nav-link">L4</a></div><div class="nav-item"><a href="/osqlnotes/Lesson5.html" class="nav-link">L5</a></div><div class="nav-item"><a href="/osqlnotes/Lesson6.html" class="nav-link">L6</a></div><div class="nav-item"><a href="/osqlnotes/Lesson7.html" class="nav-link">L7</a></div><div class="nav-item"><a href="/osqlnotes/Lesson8.html" class="nav-link">L8</a></div><div class="nav-item"><a href="/osqlnotes/Lesson9.html" class="nav-link router-link-exact-active router-link-active">L9</a></div><div class="nav-item"><a href="/osqlnotes/Lesson10.html" class="nav-link">L10</a></div><div class="nav-item"><a href="/osqlnotes/Lesson11.html" class="nav-link">L11</a></div><div class="nav-item"><a href="/osqlnotes/Lesson12.html" class="nav-link">L12</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/osqlnotes/" class="nav-link">Summary</a></div><div class="nav-item"><a href="/osqlnotes/Lesson1.html" class="nav-link">L1</a></div><div class="nav-item"><a href="/osqlnotes/Lesson2.html" class="nav-link">L2</a></div><div class="nav-item"><a href="/osqlnotes/Lesson3.html" class="nav-link">L3</a></div><div class="nav-item"><a href="/osqlnotes/Lesson4.html" class="nav-link">L4</a></div><div class="nav-item"><a href="/osqlnotes/Lesson5.html" class="nav-link">L5</a></div><div class="nav-item"><a href="/osqlnotes/Lesson6.html" class="nav-link">L6</a></div><div class="nav-item"><a href="/osqlnotes/Lesson7.html" class="nav-link">L7</a></div><div class="nav-item"><a href="/osqlnotes/Lesson8.html" class="nav-link">L8</a></div><div class="nav-item"><a href="/osqlnotes/Lesson9.html" class="nav-link router-link-exact-active router-link-active">L9</a></div><div class="nav-item"><a href="/osqlnotes/Lesson10.html" class="nav-link">L10</a></div><div class="nav-item"><a href="/osqlnotes/Lesson11.html" class="nav-link">L11</a></div><div class="nav-item"><a href="/osqlnotes/Lesson12.html" class="nav-link">L12</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/osqlnotes/" class="sidebar-link">osqlnotes</a></li><li><a href="/osqlnotes/Lesson1.html" class="sidebar-link">Lesson 1 Select</a></li><li><a href="/osqlnotes/Lesson2.html" class="sidebar-link">Lesson 2 Where</a></li><li><a href="/osqlnotes/Lesson3.html" class="sidebar-link">Lesson 3 Single Row Functions</a></li><li><a href="/osqlnotes/Lesson4.html" class="sidebar-link">Lesson 4 Group Functions pt.1</a></li><li><a href="/osqlnotes/Lesson5.html" class="sidebar-link">Lesson 5 Joining tables</a></li><li><a href="/osqlnotes/Lesson6.html" class="sidebar-link">Lesson 6 Using Sub-queries</a></li><li><a href="/osqlnotes/Lesson7.html" class="sidebar-link">Lesson 7 Quiz Questions</a></li><li><a href="/osqlnotes/Lesson8.html" class="sidebar-link">Lesson 8 Set operators</a></li><li><a href="/osqlnotes/Lesson9.html" class="active sidebar-link">Lesson 9 DML Manipulating Data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson9.html#what-is-dml-data-manipulation-language" class="sidebar-link">What is DML? Data Manipulation Language</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson9.html#insert-with-null-values" class="sidebar-link">Insert with null values</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson9.html#insert-by-copying-from-another-table" class="sidebar-link">Insert by copying from another table</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson9.html#update-modify-change-data" class="sidebar-link">Update modify/change data</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson9.html#updating-rows-based-on-another-table" class="sidebar-link">Updating rows based on another table</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson9.html#delete" class="sidebar-link">Delete</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson9.html#rows-based-on-another-table" class="sidebar-link">Rows based on another table</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson9.html#truncate-statement" class="sidebar-link">Truncate statement</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson9.html#database-transactions-start-and-end" class="sidebar-link">Database Transactions: Start and End</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson9.html#example" class="sidebar-link">Example</a></li><li class="sidebar-sub-header"><a href="/osqlnotes/Lesson9.html#state-of-data" class="sidebar-link">State of Data</a></li></ul></li><li><a href="/osqlnotes/Lesson10.html" class="sidebar-link">Lesson 10 Create Manage Tables</a></li><li><a href="/osqlnotes/Lesson11.html" class="sidebar-link">Lesson 11 Manage Schema Objects - Altering Tables</a></li><li><a href="/osqlnotes/Lesson12.html" class="sidebar-link">Lesson 12 Index-Dictionary Views</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="lesson-9-dml-manipulating-data"><a href="#lesson-9-dml-manipulating-data" class="header-anchor">#</a> Lesson 9 DML Manipulating Data</h1> <p>There are 3 things you can do:</p> <ol><li>add</li> <li>change</li> <li>delete</li></ol> <p>they correspond to</p> <ol><li>insert</li> <li>update</li> <li>delete</li></ol> <ul><li>Control transactions – COMMIT SAVEPOINT ROLLBACK</li></ul> <h2 id="what-is-dml-data-manipulation-language"><a href="#what-is-dml-data-manipulation-language" class="header-anchor">#</a> What is DML? Data Manipulation Language</h2> <p>The sql that manipulates data.</p> <p>EXAMPLE:
Student comes in to pay for tuition</p> <ol><li>Decrease the amount owing to Seneca</li> <li>Increase the total amount collected for the day</li> <li>Store copy of activity (transaction) in a journal</li> <li>Add it to the end of day check list</li> <li>Print a receipt</li></ol> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>NOTE:
Steps 1, 2, 3 and 4 must be completed before a transaction is complete.
If any one of them fails, then all actions must be undone.</p></div> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token keyword">table</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">column</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">column</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>Add new rows to a table by using the INSERT statement:</p></li> <li><p>With this syntax, only one row is inserted at a time.</p></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> departments
<span class="token punctuation">(</span>department_id<span class="token punctuation">,</span> department_name<span class="token punctuation">,</span> manager_id<span class="token punctuation">,</span> location_id<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span> <span class="token string">'Public Relations'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1700</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><ul><li>Enclose character and date values within single quotation marks.</li></ul> <h2 id="insert-with-null-values"><a href="#insert-with-null-values" class="header-anchor">#</a> Insert with null values</h2> <p>Implicit method: Omit the column from the column list.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> departments <span class="token punctuation">(</span>department_id<span class="token punctuation">,</span> department_name<span class="token punctuation">)</span> 
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">'Purchasing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The specific columns were stated in the INSERT
That means it knows where it goes. Could do it in different order</p> <p>Explicit method: Specify the NULL keyword in the VALUES clause.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> departments
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">'Finance'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>There are 4 columns in the table
None of the columns were mentioned
so there needs to be 4 columns in the VALUES clause
with data that matches the columns info</p> <h2 id="insert-by-copying-from-another-table"><a href="#insert-by-copying-from-another-table" class="header-anchor">#</a> Insert by copying from another table</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> salesrep <span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>salary<span class="token punctuation">,</span> commission_pct<span class="token punctuation">)</span>
<span class="token keyword">select</span> employeeid<span class="token punctuation">,</span>lastname<span class="token punctuation">,</span>salary<span class="token punctuation">,</span>commission_pct
<span class="token keyword">from</span> employees
<span class="token keyword">where</span> jobid <span class="token operator">like</span> <span class="token string">'%REP%'</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">Note</p> <ul><li>No VAUES clause</li> <li>Number of columns must match</li> <li>Data type must match</li></ul></div> <h2 id="update-modify-change-data"><a href="#update-modify-change-data" class="header-anchor">#</a> Update modify/change data</h2> <p>General Syntax</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">Update</span> <span class="token keyword">table</span>
  <span class="token keyword">set</span> <span class="token keyword">column</span> <span class="token operator">=</span> <span class="token keyword">value</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">column</span> <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
  <span class="token keyword">where</span> condition<span class="token punctuation">;</span>

<span class="token keyword">UPDATE</span> 	employees
<span class="token keyword">SET</span> 		department_id <span class="token operator">=</span> <span class="token number">50</span>
<span class="token keyword">WHERE</span> 	employee_id <span class="token operator">=</span> <span class="token number">113</span><span class="token punctuation">;</span>

</code></pre></div><div class="custom-block danger"><p class="custom-block-title">THIS IS DANGEROUS</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> employees
<span class="token keyword">SET</span> department_id <span class="token operator">=</span> <span class="token number">110</span><span class="token punctuation">;</span>
<span class="token comment">-- will set everything to 110 because where clause is missing, aka rollback time</span>
</code></pre></div></div> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> 	employees
<span class="token keyword">SET</span> 		job_id <span class="token operator">=</span> <span class="token string">'IT_PROG'</span><span class="token punctuation">,</span>  	<span class="token comment">-- one change</span>
commission_pct <span class="token operator">=</span> <span class="token boolean">NULL</span> 	<span class="token comment">-- two changes</span>
<span class="token keyword">WHERE</span> 	employee_id <span class="token operator">=</span> <span class="token number">114</span><span class="token punctuation">;</span>
</code></pre></div><p>Update employee 113 with same data from another employee
A) JOB ID SAME AS EMPLOYEE 205
B) SALARY SAME AS 205</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> 	employees
<span class="token keyword">SET</span> 		job_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> job_id
<span class="token keyword">FROM</span> employees
<span class="token keyword">WHERE</span> employee_id <span class="token operator">=</span> <span class="token number">205</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
salary <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> salary
<span class="token keyword">FROM</span> employees
<span class="token keyword">WHERE</span> employee_id <span class="token operator">=</span> <span class="token number">205</span><span class="token punctuation">)</span>
<span class="token keyword">WHERE</span> 	employee_id <span class="token operator">=</span> <span class="token number">113</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">--easier way to copy</span>
<span class="token keyword">update</span> employees
<span class="token keyword">set</span> <span class="token punctuation">(</span>jobid<span class="token punctuation">,</span> salary<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> jobid<span class="token punctuation">,</span> salary <span class="token keyword">from</span> employees <span class="token keyword">where</span> employeeid <span class="token operator">=</span> <span class="token number">205</span><span class="token punctuation">)</span>

employeeid <span class="token operator">=</span> <span class="token number">113</span>
</code></pre></div><p>What does this do?</p> <h2 id="updating-rows-based-on-another-table"><a href="#updating-rows-based-on-another-table" class="header-anchor">#</a> Updating rows based on another table</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">update</span> employees
<span class="token keyword">set</span> departmentid <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> departmentid <span class="token keyword">from</span> employees <span class="token keyword">where</span> employeeid <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">)</span>

<span class="token keyword">where</span> jobid <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token keyword">select</span> jobid <span class="token keyword">from</span> employees <span class="token keyword">where</span> employeeid <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">)</span>

<span class="token comment">--Changes all employees that have a job_id the same as employee 200 to have the same department ID as employee 100</span>

</code></pre></div><h2 id="delete"><a href="#delete" class="header-anchor">#</a> Delete</h2> <h3 id="allows-us-to-remove-specific-row-or-rows"><a href="#allows-us-to-remove-specific-row-or-rows" class="header-anchor">#</a> allows us to remove specific row or rows</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> departments
<span class="token keyword">where</span> departmentname <span class="token operator">=</span> <span class="token string">'Finanace'</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> employees
<span class="token keyword">where</span> employeeid <span class="token operator">=</span> <span class="token number">115</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> departments
<span class="token keyword">where</span> departmentid <span class="token operator">in</span>  <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">no where = rollback</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">--deletes the data from the table</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre></div></div> <h2 id="rows-based-on-another-table"><a href="#rows-based-on-another-table" class="header-anchor">#</a> Rows based on another table</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> employees
<span class="token keyword">where</span> departmentid <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token keyword">select</span> departmentid <span class="token keyword">from</span> departments <span class="token keyword">where</span> departmentname <span class="token operator">like</span> <span class="token string">'%Public%'</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="truncate-statement"><a href="#truncate-statement" class="header-anchor">#</a> Truncate statement</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">truncate</span> employees
</code></pre></div><h3 id="why-used"><a href="#why-used" class="header-anchor">#</a> WHY USED?</h3> <ul><li>More efficient than DELETE</li> <li>Delete checks all delete triggers</li> <li>Truncate is a DDL statement and does not create a copy to allow for ROLLBACK</li> <li>If the table is the parent you need to drop constraint of the FK to be able to do this</li></ul> <h2 id="database-transactions-start-and-end"><a href="#database-transactions-start-and-end" class="header-anchor">#</a> Database Transactions: Start and End</h2> <ul><li><p>Begin when the first DML SQL statement is executed. - a statement that makes changes to the database - INSERT, UPDATE, DELETE</p></li> <li><p>End with one of the following events:</p></li> <li><p>A COMMIT or ROLLBACK statement is issued.</p></li> <li><p>A DDL or DCL statement that executes with an automatic commit
or</p></li> <li><p>The user exits SQL Developer or SQL*Plus.</p></li> <li><p>The system crashes.</p></li></ul> <ul><li><p>COMMIT Ends last transaction making the pending data changes before the commit to be permanent</p></li> <li><p>SAVEPOINT name
SAVEPOINT name marks a savepoint within the current transaction</p></li> <li><p>ROLLBACK
ROLLBACK ends the current transaction by discarding all pending data changes back to the last commit or the start of activity</p></li> <li><p>ROLLBACK TO
SAVEPOINT name ROLLBACK TO SAVEPOINT rolls back the current transaction to the specified savepoint, thereby discarding any changes and/or savepoints that were created after the savepoint to which you are rolling back. If you omit the TO SAVEPOINT clause, the ROLLBACK statement rolls back the entire transaction. Because savepoints are logical, there is no way to list the savepoints that you have created</p></li></ul> <h2 id="example"><a href="#example" class="header-anchor">#</a> Example</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">SAVEPOINT</span> update_done<span class="token punctuation">;</span> 	 receive a message <span class="token keyword">SAVEPOINT</span> update_done succeeded
<span class="token keyword">INSERT</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> update_done<span class="token punctuation">;</span>  receive a message <span class="token keyword">ROLLBACK</span> succeeded

</code></pre></div><h2 id="state-of-data"><a href="#state-of-data" class="header-anchor">#</a> State of Data</h2> <h3 id="_1-before-a-commit-or-rollback"><a href="#_1-before-a-commit-or-rollback" class="header-anchor">#</a> 1. Before a COMMIT or ROLLBACK</h3> <ul><li><p>While making data changes (DML)</p></li> <li><p>The previous state of the data can be recovered</p></li> <li><p>The current state can be reviewed with the SELECT - make changes then use a select to see the results</p></li> <li><p>Other users cannot see the effect of the DML changes - Each user sees the state the data was in at the last commit</p></li> <li><p>Affected rows are locked</p></li> <li><p>Other users cannot change the affected rows</p></li></ul> <h3 id="_2-after-a-commit"><a href="#_2-after-a-commit" class="header-anchor">#</a> 2. After a COMMIT</h3> <ul><li><p>Data changes are saved in the database.</p></li> <li><p>The previous state of the data is overwritten.</p></li> <li><p>All users can view the results.</p></li> <li><p>Locks on the affected rows are released;
Those rows are available for other users to manipulate.</p></li> <li><p>All savepoints are erased.</p></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token comment">--Make some changes</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> employees
<span class="token keyword">WHERE</span> employee_id <span class="token operator">=</span> <span class="token number">99999</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> departments
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">290</span><span class="token punctuation">,</span> <span class="token string">'Corporate Tax'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">1700</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--Commit the changes –</span>

<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>

<span class="token comment">-- 1 Remove departments 290 and 300 in the DEPARTMENTS table</span>
<span class="token comment">-- 2 Update a row in the EMPLOYEES table.</span>
<span class="token comment">-- 3 Save the data change.</span>

<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> departments
<span class="token keyword">WHERE</span> department_id <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">290</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">UPDATE</span> employees
<span class="token keyword">SET</span> department_id <span class="token operator">=</span> <span class="token number">80</span>
<span class="token keyword">WHERE</span> employee_id <span class="token operator">=</span> <span class="token number">206</span><span class="token punctuation">;</span>

<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>


</code></pre></div><h3 id="discard-all-pending-changes-by-using-the-rollback-statement"><a href="#discard-all-pending-changes-by-using-the-rollback-statement" class="header-anchor">#</a> Discard all pending changes by using the ROLLBACK statement:</h3> <ul><li><p>Data changes are undone.</p></li> <li><p>Previous state of the data is restored.</p></li> <li><p>Locks on the affected rows are released.</p></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

<span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span>
 
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/osqlnotes/Lesson8.html" class="prev">Lesson 8 Set operators</a></span> <span class="next"><a href="/osqlnotes/Lesson10.html">Lesson 10 Create Manage Tables</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/osqlnotes/assets/js/app.97a6742f.js" defer></script><script src="/osqlnotes/assets/js/2.8cd1edd2.js" defer></script><script src="/osqlnotes/assets/js/16.1a525148.js" defer></script>
  </body>
</html>
